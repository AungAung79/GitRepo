#!/usr/bin python
#coding=utf-8

import sys
from gensim import corpora, models, similarities

reload(sys)
sys.setdefaultencoding('utf-8')

documents = ["Shipment of gold damaged in a fire", "Delivery of silver arrived in a silver truck","Shipment of gold arrived in a truck"]
texts = [[word for word in document.lower().split()] for document in documents]
dictionary = corpora.Dictionary(texts)
corpus = [dictionary.doc2bow(text) for text in texts]
tfidf = models.TfidfModel(corpus)
corpus_tfidf = tfidf[corpus]
lda = models.LdaModel(corpus_tfidf, id2word=dictionary, num_topics=2)
corpus_lda = lda[corpus_tfidf]
index = similarities.Similarity('tmp/sim',lda[corpus],num_features=2)
query = corpus[0]
query_lda = lda[query]
similarities = index[query_lda]
print similarities
#query_lda = lda[query]
#sims = index[query_lda]
#print list(enumerate(sims))
